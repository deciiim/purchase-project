<div class="container">
  <header class="page-header">
    <h1>Demandes de Projets</h1>
    <div class="header-actions">
      <div class="search-box">
        <input 
          type="text" 
          [(ngModel)]="searchTerm" 
          (input)="filterRequests()"
          placeholder="Rechercher des demandes de projets..."
        >
        <i class="fas fa-search"></i>
      </div>
      <button class="back-button" routerLink="/directeur">
        <i class="fas fa-arrow-left"></i>
        Retour au Tableau de Bord
      </button>
    </div>
  </header>

  <div class="stats-cards">
    <div class="stat-card">
      <h3>{{ totalRequests }}</h3>
      <p>Total des Demandes</p>
    </div>
  </div>

  <div class="content">
    <div class="requests-list">
      <div *ngFor="let request of filteredRequests" class="request-card">
        <div class="request-header">
          <h3>{{ request.name }}</h3>
        </div>

        <div class="request-details">
          <div class="detail-row">
            <div class="detail-group">
              <label>ID Demande d'achat :</label>
              <p>{{ request.demandeAchat?.id }}</p>
            </div>
            <div class="detail-group">
              <label>Date :</label>
              <p>{{ request.createdAt | date:'dd/MM/yyyy' }}</p>
            </div>
          </div>

          <div class="detail-row">
            <div class="detail-group">
              <label>ID Projet :</label>
              <p>{{ request.projet?.id }}</p>
            </div>
          </div>

          <div class="detail-group full-width">
            <label>Description :</label>
            <p>{{ request.description }}</p>
          </div>
        </div>

        <div class="request-actions">
          <button class="delete-button" (click)="deleteRequest(request)">
            <i class="fas fa-trash"></i>
            Supprimer
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
